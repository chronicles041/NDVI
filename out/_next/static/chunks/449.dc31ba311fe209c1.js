"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[449],{8622:function(e,t,n){var r=n(9669),a=n.n(r);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i="https://app.teamonetech.com/api/v1/",s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"addNewField",value:function(e){return a().post(i+"farm-details/",e)}},{key:"fetchFarmList",value:function(e){return a().get(i+"farm_info_view/?user_id=2260&ordering=-farm_id")}},{key:"fetchFarmListNDVI",value:function(e){return a().get(i+"latestndvi/?user_id=2260&ordering=-farm_id")}},{key:"fetchFarmListID",value:function(e){return a().get("".concat(i,"farm_info_view/").concat(e,"/"))}},{key:"getDateImage",value:function(e){return console.log("Param From Service for Image Dates ",e),a().get(i+"export_image/",{params:e})}},{key:"getDisasterImage",value:function(e){return a().get(i+"export_image",{params:e})}},{key:"getWeather",value:function(e){return a().get(i+"next_weather/",{params:e})}}])&&o(t.prototype,n),r&&o(t,r),e}();t.Z=new s},9898:function(e,t,n){n.d(t,{d:function(){return i},A:function(){return s}});var r=n(5893),a=n(2062),o=(0,n(5152).default)((function(){return Promise.all([n.e(279),n.e(229)]).then(n.bind(n,7229))}),{loadableGenerated:{webpack:function(){return[7229]}},ssr:!1}),i={Line:"line",Bar:"bar",Area:"area"},s=function(e){var t=e.title,n=e.type,i={options:{chart:{id:"basic-bar"},xaxis:{categories:["jan","feb","mar","apr","jun","jul","aug","sep","oct"]}},series:[{name:"series-1",data:[.24,.4,.45,.5,.39,.6,.11,.87]}]};return(0,r.jsx)(a.Z,{title:t,children:(0,r.jsx)(o,{options:i.options,series:i.series,type:n,height:"400"})})}},449:function(e,t,n){n.r(t),n.d(t,{default:function(){return ue}});var r=n(5893),a=n(7294),o=n(1163);const i=(0,a.createContext)(null),s=i.Provider;function l(){const e=(0,a.useContext)(i);if(null==e)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function c(){return l().map}var u=n(5243);function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function d(e){let{children:t,className:n,id:r,placeholder:o,style:i,whenCreated:l,...c}=e;const d=(0,a.useRef)(null),p=function(e,t){const[n,r]=(0,a.useState)(null);return(0,a.useEffect)((()=>{if(null!==e.current&&null===n){const n=new u.Map(e.current,t);null!=t.center&&null!=t.zoom?n.setView(t.center,t.zoom):null!=t.bounds&&n.fitBounds(t.bounds,t.boundsOptions),null!=t.whenReady&&n.whenReady(t.whenReady),r(n)}}),[e,n,t]),n}(d,c),h=(0,a.useRef)(!1);(0,a.useEffect)((()=>{null!=p&&!1===h.current&&null!=l&&(h.current=!0,l(p))}),[p,l]),(0,a.useEffect)((()=>()=>{null==p||p.remove()}),[p]);const[y]=(0,a.useState)({className:n,id:r,style:i}),m=(0,a.useMemo)((()=>p?{__version:1,map:p}:null),[p]),v=m?a.createElement(s,{value:m},t):o??null;return a.createElement("div",f({},y,{ref:d}),v)}function p(e,t){return null==t?function(t,n){return(0,a.useRef)(e(t,n))}:function(n,r){const o=(0,a.useRef)(e(n,r)),i=(0,a.useRef)(n),{instance:s}=o.current;return(0,a.useEffect)((function(){i.current!==n&&(t(s,n,i.current),i.current=n)}),[s,n,r]),o}}n(3935);function h(e){function t(t,n){const{instance:r,context:o}=e(t).current;return(0,a.useImperativeHandle)(n,(()=>r)),null==t.children?null:a.createElement(s,{value:o},t.children)}return(0,a.forwardRef)(t)}const y=p((function(e,t){let{children:n,...r}=e;const a=new u.Control.Layers(void 0,void 0,r);return{instance:a,context:{...t,layersControl:a}}}),(function(e,t,n){t.collapsed!==n.collapsed&&(!0===t.collapsed?e.collapse():e.expand())}));var m;const v=h((m=y,function(e){const t=l(),n=m(e,t),{instance:r}=n.current,o=(0,a.useRef)(e.position),{position:i}=e;return(0,a.useEffect)((function(){return r.addTo(t.map),function(){r.remove()}}),[t.map,r]),(0,a.useEffect)((function(){null!=i&&i!==o.current&&(r.setPosition(i),o.current=i)}),[r,i]),n}));function b(e){return function(t){const n=l(),r=(0,a.useRef)(t),[o,i]=(0,a.useState)(null),{layersControl:c,map:u}=n,f=(0,a.useCallback)((t=>{null!=c&&(r.current.checked&&u.addLayer(t),e(c,t,r.current.name),i(t))}),[c,u]),d=(0,a.useCallback)((e=>{null==c||c.removeLayer(e),i(null)}),[c]),p=(0,a.useMemo)((()=>({...n,layerContainer:{addLayer:f,removeLayer:d}})),[n,f,d]);return(0,a.useEffect)((()=>{null!==o&&r.current!==t&&(!0!==t.checked||null!=r.current.checked&&!1!==r.current.checked?!0!==r.current.checked||null!=t.checked&&!1!==t.checked||u.removeLayer(o):u.addLayer(o),r.current=t)})),t.children?a.createElement(s,{value:p},t.children):null}}function x(e,t){const n=(0,a.useRef)();(0,a.useEffect)((function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}}),[e,t])}function g(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function j(e,t){(0,a.useEffect)((function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var n;null==(n=t.layerContainer)||n.removeLayer(e.instance),t.map.removeLayer(e.instance)}}),[t,e])}function w(e){return function(t){const n=l(),r=e(g(t,n),n);return function(e,t){const n=(0,a.useRef)(t);(0,a.useEffect)((function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t}),[e,t])}(n.map,t.attribution),x(r.current,t.eventHandlers),j(r.current,n),r}}function k(e){return function(t){const n=l(),r=e(g(t,n),n);return x(r.current,t.eventHandlers),j(r.current,n),function(e,t){const n=(0,a.useRef)();(0,a.useEffect)((function(){if(t.pathOptions!==n.current){const r=t.pathOptions??{};e.instance.setStyle(r),n.current=r}}),[e,t])}(r.current,t),r}}function _(e,t){return h(w(p(e,t)))}v.BaseLayer=b((function(e,t,n){e.addBaseLayer(t,n)})),v.Overlay=b((function(e,t,n){e.addOverlay(t,n)}));const O=h(k(p((function(e,t){let{positions:n,...r}=e;const a=new u.Polygon(n,r);return{instance:a,context:{...t,overlayContainer:a}}}),(function(e,t,n){t.positions!==n.positions&&e.setLatLngs(t.positions)}))));const R=_((function(e,t){let{children:n,...r}=e;const a=new u.LayerGroup([],r);return{instance:a,context:{...t,layerContainer:a}}}));const S=function(e,t){return function(e){function t(t,n){const{instance:r}=e(t).current;return(0,a.useImperativeHandle)(n,(()=>r)),null}return(0,a.forwardRef)(t)}(w(p(e,t)))}((function(e,t){let{url:n,...r}=e;return{instance:new u.TileLayer(n,g(r,t)),context:t}}),(function(e,t,n){const{opacity:r,zIndex:a}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=a&&a!==n.zIndex&&e.setZIndex(a)}));const C=_((function(e,t){let{bounds:n,url:r,...a}=e;const o=new u.ImageOverlay(r,n,a);return{instance:o,context:{...t,overlayContainer:o}}}),(function(e,t,n){!function(e,t,n){t.bounds instanceof u.LatLngBounds&&t.bounds!==n.bounds&&e.setBounds(t.bounds),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=t.zIndex&&t.zIndex!==n.zIndex&&e.setZIndex(t.zIndex)}(e,t,n),t.url!==n.url&&e.setUrl(t.url)}));function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function E(e,t){return!t||"object"!==M(t)&&"function"!==typeof t?N(e):t}function L(e,t){return L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},L(e,t)}function z(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var M=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var a=P(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}var V=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(s,e);var t,n,o,i=F(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),A(N(t=i.call(this,e)),"polyRef",a.createRef()),A(N(t),"ndviOverlayRef",a.createRef()),A(N(t),"ndwiOverlayRef",a.createRef()),A(N(t),"fertilizerOverlayRef",a.createRef()),A(N(t),"layControlRef",a.createRef()),A(N(t),"controllLayer",(function(){var e=t.layControlRef.current._layers.findIndex((function(e){return"NDWI"===e.name})),n=t.layControlRef.current._layers.findIndex((function(e){return"NDVI"===e.name}));return console.log("**Layer Control Ref/NDWI",t.layControlRef.current._layerControlInputs[e].checked),console.log("**Layer Control Ref/NDVI",t.layControlRef.current._layerControlInputs[n].checked),null})),A(N(t),"createPolygon",(function(e){var n=[];e.map((function(e){return n=z(n).concat([[e[1],e[0]]]),null})),console.log("New Array : ",n),t.setState({polygon:n,ndwi_path:"",ndvi_path:""},(function(){}))})),t.state={polygon:[],ndvi_path:"",ndwi_path:"",fertilizer_path:"",geo_path:"https://miro.medium.com/max/800/1*Z9QPlG7TvSkYMv0OzUbrPg.jpeg",checkImage:!1},t}return t=s,(n=[{key:"componentWillMount",value:function(){this.createPolygon(this.props.polygon)}},{key:"componentDidUpdate",value:function(e,t){this.state.polygon!==t.polygon&&this.controllLayer(),e.polygon===this.state.polygon&&this.createPolygon(this.props.polygon),e.polygon!==this.props.polygon&&this.createPolygon(this.props.polygon),e.polygon!==this.props.polygon&&(this.createPolygon(this.props.polygon),this.ndwiOverlayRef.current._bounds=this.polyRef.current._bounds,this.ndviOverlayRef.current._bounds=this.polyRef.current._bounds,this.fertilizerOverlayRef.current._bounds=this.polyRef.current._bounds),e.selectedData!==this.props.selectedData&&(this.ndwiOverlayRef.current._bounds=this.polyRef.current._bounds,this.fertilizerOverlayRef.current._bounds=this.polyRef.current._bounds,this.ndviOverlayRef.current._bounds=this.polyRef.current._bounds,this.controllLayer(),this.setState({ndwi_path:this.props.selectedData.ndwi_path,ndvi_path:this.props.selectedData.ndvi_path,fertilizer_path:this.props.selectedData.vegetation_zoning_path}))}},{key:"render",value:function(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(v,{ref:this.layControlRef,position:"topright",collapsed:""===this.state.ndwi_path,children:[(0,r.jsx)(O,{ref:this.polyRef,pathOptions:{color:"purple"},positions:this.state.polygon}),(0,r.jsxs)(R,{children:[(0,r.jsx)(v.BaseLayer,{checked:!0,name:"Satellite Map",children:(0,r.jsx)(S,{url:"https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"})})," ",(0,r.jsx)(v.BaseLayer,{name:"Traffic Map",children:(0,r.jsx)(S,{url:"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png"})})," ",(0,r.jsx)(v.BaseLayer,{name:"Hybrid Map",children:(0,r.jsx)(S,{url:"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png"})})," "]}),(0,r.jsxs)(R,{children:[(0,r.jsxs)(v.Overlay,{checked:this.state.checkImage,name:"NDWI",children:[(0,r.jsx)(C,{ref:this.ndwiOverlayRef,bounds:this.state.polygon,url:"".concat(this.state.ndwi_path)})," "]})," ",(0,r.jsxs)(v.Overlay,{ref:this.layerControlRef,checked:this.state.checkImage,name:"NDVI",children:[(0,r.jsx)(C,{ref:this.ndviOverlayRef,bounds:this.state.polygon,url:"".concat(this.state.ndvi_path)})," "]}),(0,r.jsxs)(v.Overlay,{ref:this.layerControlRef,checked:this.state.checkImage,name:"FertilizerSpary",children:[(0,r.jsx)(C,{ref:this.fertilizerOverlayRef,bounds:this.state.polygon,url:"".concat(this.state.fertilizer_path)})," "]})]})]})})}}])&&D(t.prototype,n),o&&D(t,o),s}(a.Component);var B=function(e){var t=e.polygon,n=e.center,o=e.viewControl,i=(e.newFarmArray,e.selectedData),s=(e.configureColorPalate,(0,a.useState)(!1)),l=(s[0],s[1]),u=function(){return c().setView([n[1],n[0]],17),null};return(0,a.useEffect)((function(){l(o.addView)}),[o.addView]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(d,{center:[n[1],n[0]],zoom:16,children:[(0,r.jsx)(V,{selectedData:i,polygon:t}),(0,r.jsx)(u,{})]})})},T=n(8622);function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var G=function(e){var t=e.selectedItem,n=(e.loading,(0,a.useState)([])),o=n[0],i=n[1],s=(0,a.useState)(""),l=s[0],c=s[1],u=(0,a.useState)(null),f=u[0],d=u[1];(0,a.useEffect)((function(){p()}),[l]);var p=function(){var e=[],t={farm_name:l,user__id:203};T.Z.fetchFarmList(t).then((function(t){t.data.results.map((function(t){return e=W(e).concat([t]),null})),i(e)}))};return(0,r.jsxs)("div",{className:"pl-4",children:[(0,r.jsx)("div",{children:(0,r.jsx)("input",{onChange:function(e){c(e.target.value),p()},placeholder:"Search Farm",className:"border p-2 rounded-lg border-black border-opacity-30 w-full"})}),(0,r.jsx)("ul",{className:"farmList mt-2 mb-2 pr-2",children:o.map((function(e,n){return(0,r.jsxs)("li",{className:" ".concat(f==n?"bg-primary text-white":"bg-transparent text-black hover:bg-gray-300","  grid grid-cols-2 p-2 max-w-sm rounded mt-2 border"),onClick:function(r){t(e),d(n)},children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("label",{className:"text-xs font-bold text-black text-opacity-70 ",children:"Farm Name "}),e.farm_name?e.farm_name:(0,r.jsx)(r.Fragment,{children:" N/A "})]}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("label",{className:"text-xs font-bold text-black text-opacity-70 ",children:"Area "}),(1.5*e.farm_area*20).toFixed(1)+" kattha"]})]})}))}),(0,r.jsxs)("div",{children:["Total Records : ",o.length]})]})},Z=n(5675),H={src:"/_next/static/media/ndwi.8d0cf6f1.png",height:10,width:25,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAYAAACuyE5IAAAAZUlEQVR42mNImsvwP20+w/+sRQz/J6yTP7dnt9XOuuVCBztXynfa9jCkMBQuY6zPXcyyIXI+w+Wde0z/39nn8794BcP/quVc/7MWMv5nQAYH91pJH91t69azhbewfAXr2pxFTOcBtZIp6T6YAqkAAAAASUVORK5CYII="};var Y=function(e){return e.ndvi,e.ndwi,(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"p-1",span:2,children:[(0,r.jsxs)("div",{className:"flex flex-col lg:w-2/3",children:[(0,r.jsx)("div",{className:"mb-1 mx-auto font-bold",children:"NDVI Range"}),(0,r.jsxs)("div",{className:"flex mt-1 flex-row justify-between",children:[(0,r.jsx)("div",{className:"text-xs font-bold text-black opacity-60",children:"POOR"}),(0,r.jsx)("div",{className:"text-xs font-bold text-black opacity-60",children:"GOOD"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col lg:w-2/3",children:[(0,r.jsx)("div",{className:"mb-1 mx-auto font-bold",children:"NDWI Range"}),(0,r.jsx)(Z.default,{src:H}),(0,r.jsxs)("div",{className:"flex mt-1 flex-row justify-between",children:[(0,r.jsx)("div",{className:"text-xs font-bold text-black opacity-60",children:"POOR"}),(0,r.jsx)("div",{className:"text-xs font-bold text-black opacity-60",children:"GOOD"})]})]})]})})})};function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){J(e,t,n[t])}))}return e}function $(e,t){return!t||"object"!==te(t)&&"function"!==typeof t?Q(e):t}function ee(e,t){return ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ee(e,t)}var te=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ne(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=q(e);if(t){var a=q(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $(this,n)}}var re={selectedDate:"",marks:{},visibleMarks:{currentIndex:0,totalDates:null,marks:{}},markerIndex:0},ae=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(i,e);var t,n,a,o=ne(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),J(Q(t=o.call(this,e)),"createMarkers",(function(){var e={};t.props.mapData.map((function(t,n){return e=K({},e,J({},n,{style:{color:"#374151",fontSize:"7px"},label:(0,r.jsx)("strong",{children:t.date})})),null})),t.setState({marks:e,visibleMarks:K({},t.state.visibleMarks,{totalDates:Object.keys(e).length})},(function(){t.makeVisibleMarker(!1,!1)}))})),J(Q(t),"makeVisibleMarker",(function(e,n){var r=t.state.marks,a=t.state.visibleMarks.currentIndex,o=e===n?a:n?a+8:a-8,i=Object.keys(r).length,s={};if(i<8)t.setState({visibleMarks:{currentIndex:0,marks:r,totalDates:Object.keys(r).length,loading:!1}});else if(i>7){for(var l=0,c=o;c<o+8;c++)console.log("**Marks / Seprated",c,r[c]),r[c]&&(s=K({},s,J({},l,r[c])),l++);t.setState({visibleMarks:K({},t.state.visibleMarks,{currentIndex:o,marks:s}),loading:!1})}})),J(Q(t),"onChange",(function(e){console.log("Selected Date Detail",t.props.mapData[e]),t.props.selectedIndex(t.props.mapData[e]),t.setState({selectedDate:t.props.mapData[e].date,markerIndex:e})})),t.state=re,t}return t=i,(n=[{key:"componentDidUpdate",value:function(e,t){if(e.mapData!==this.props.mapData){var n=this;console.log("Did Update Slider",e,this.props.mapData),this.setState({initialState:re},(function(){n.createMarkers()}))}}},{key:"render",value:function(){var e=this,t=this.state;return t.visibleMarks,t.marks,(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{for:"dates",children:"Choose Date:"}),(0,r.jsxs)("select",{hidden:this.props.loading,onChange:function(){return e.onChange(document.getElementById("dates").value)},name:"dates",id:"dates",children:[(0,r.jsx)("option",{value:"",children:"Select your option"}),this.props.mapData.map((function(e,t){return(0,r.jsxs)("option",{disabled:e.cloud>30,value:t,children:[e.date,"  ",e.cloud<30?"":"\u2601\ufe0f"]})}))]}),(0,r.jsx)("span",{hidden:!this.props.loading,children:" \xa0 Loading..."})]})}}])&&X(t.prototype,n),a&&X(t,a),i}(a.Component),oe=(n(9898),(0,n(5152).default)((function(){return Promise.all([n.e(279),n.e(229)]).then(n.bind(n,7229))}),{loadableGenerated:{webpack:function(){return[7229]}},ssr:!1}));var ie=function(e){var t,n,a,o,i=e.graphData,s=(e.loading,{series:[{name:"Performance",data:null===i||void 0===i||null===(t=i.ndvi)||void 0===t?void 0:t.reverse().map((function(e){return e.ndvi_value}))}],options:{xaxis:{categories:null===i||void 0===i||null===(n=i.ndvi)||void 0===n?void 0:n.map((function(e){return e.date})),reverse:!0,title:{text:"Date"}},yaxis:{title:{text:"NDVI Performance"}},options:{chart:{type:"area",height:350,width:"100%",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"straight"},title:{text:"Fundamental Analysis of Stocks",align:"left"},subtitle:{text:"Price Movements",align:"left"},legend:{horizontalAlign:"left"}}}});return null===i||void 0===i||null===(a=i.ndwi)||void 0===a||a.map((function(e){return e.ndwi_value})),null===i||void 0===i||null===(o=i.ndvi)||void 0===o||o.map((function(e){return e.date})),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(oe,{options:s.options,series:s.series,type:"area",height:300}),(0,r.jsx)("br",{})]})};function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le=[{key:"warranty_id",value:"2930"},{key:"farm_name",value:"farm",disabled:!0},{key:"polygon",value:"[[104.219704724848,16.5132925948019],[104.217038944364,16.5128624978806],[104.216757982969,16.5129605394902],[104.217025533319,16.5134076728891],[104.219310775399,16.5141016758783],[104.219704724848,16.5132925948019]]"},{key:"area",value:"20.4"},{key:"plantation_date",value:"2020-06-01"},{key:"disaster_date",value:"2020-11-30"},{key:"harvest_date",value:"2020-12-01"},{key:"next",value:"False",disabled:!0},{key:"next_date",value:"null",disabled:!0}],ce={addView:!1,listView:!0,detailView:!1};var ue=function(e){(0,o.useRouter)();var t=(0,a.useRef)(),n=(0,a.useState)(JSON.parse(le[2].value)),i=n[0],s=n[1],l=(0,a.useState)([102.8312416766951,15.248647579054131]),c=l[0],u=l[1],f=(0,a.useState)(ce),d=f[0],p=(f[1],(0,a.useState)()),h=(p[0],p[1]),y=(0,a.useState)([]),m=y[0],v=y[1],b=(0,a.useState)({}),x=b[0],g=b[1],j=(0,a.useState)({}),w=j[0],k=j[1],_=(0,a.useState)(""),O=_[0],R=_[1],S=(0,a.useState)(!1),C=S[0],I=S[1],N=(0,a.useState)({}),D=(N[0],N[1],(0,a.useState)({})),A=D[0],P=D[1],E=(0,a.useState)({}),L=E[0],z=E[1],M=(0,a.useState)(!1),F=(M[0],M[1],(0,a.useState)(!0)),V=F[0],U=F[1],W=(0,a.useState)(!0),Z=W[0],H=W[1],Q=(0,a.useState)(),X=(Q[0],Q[1]);(0,a.useEffect)((function(){}),[]);var J=function(e){I(!0),s(e.farm_polygon_json.location),u(e.extra_field.centroid),k(e),q(e,"False",null),console.log("Selected Farm :",e),console.log("Polygon :",Object.values(e.farm_polygon_json)),console.log("Center :",e.extra_field.centroid)},q=function(e,t,n){K();var r={farm_id:e.farm_id,previous:t,previous_date:n};T.Z.getDateImage(r).then((function(e){var t=e.data.data.concat(m);v(t),I(!1),v(e.data.data),R(e.data.previous_date);var n=e.data.ndviGraph;z({ndvi:n,ndwi:e.data.ndwiGraph}),console.log("Data:",data)})).catch((function(e){return I(!1)}))},K=function(){var e={coordinates:[81.4434422,28.2097205].toString()};w&&T.Z.getWeather(e).then((function(e){var t;console.log("Weather",e.data),X(null===(t=e.data)||void 0===t?void 0:t.daily)})).catch((function(e){return null}))};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsxs)("div",{className:"flex flex-row p-3",children:[(0,r.jsxs)("div",{className:"basis-3/4",children:[(0,r.jsxs)("div",{className:"flex flex-row p-3",children:[(0,r.jsx)("div",{className:"basis-6/12",children:(0,r.jsx)(ae,{loading:C,mapData:m,selectedIndex:g,getNewDates:function(t,n){e.location.state||(I(!0),q(w,"True",O))}})}),(0,r.jsxs)("div",{className:"basis-3/12",children:[(0,r.jsx)("input",{type:"checkbox",onClick:function(){return U(!V)}}),"\xa0 Time Series Graph"]}),(0,r.jsxs)("div",{className:"basis-3/12",children:[(0,r.jsx)("input",{type:"checkbox",onClick:function(){return H(!Z)}}),"\xa0 Weather"]})]}),(0,r.jsx)("div",{className:"flex flex-row",children:(0,r.jsx)(B,{polygon:i,center:c,ref:function(e){return t},viewControl:d,newFarmArray:h,selectedData:x,configureColorPalate:function(e,t){return P(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){se(e,t,n[t])}))}return e}({},A,se({},e,t)))}})})]}),(0,r.jsx)("div",{className:"basis-1/4",children:(0,r.jsx)(G,{loading:C,selectedFarm:w,selectedItem:J})})]}),(0,r.jsxs)("div",{className:"flex flex-row p-3 ",children:[(0,r.jsx)("div",{className:"basis-3/4",children:(0,r.jsx)(Y,{ndvi:m.length>0,ndwi:m.length>0})}),(0,r.jsx)("div",{class:"basis-1/4"})]}),(0,r.jsxs)("div",{className:"flex flex-row p-3",children:[(0,r.jsx)("div",{hidden:V,className:"basis-4/4 w-full",children:(0,r.jsx)(ie,{graphData:L})}),(0,r.jsx)("div",{class:"basis-1/4"})]})]})})}}}]);