"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[368],{7368:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var r=t(5893),o=t(7294);const c=(0,o.createContext)(null),u=c.Provider;function l(){const e=(0,o.useContext)(c);if(null==e)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function a(){return l().map}var i=t(5243);function s(){return s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},s.apply(this,arguments)}function f(e){let{children:n,className:t,id:r,placeholder:c,style:l,whenCreated:a,...f}=e;const p=(0,o.useRef)(null),d=function(e,n){const[t,r]=(0,o.useState)(null);return(0,o.useEffect)((()=>{if(null!==e.current&&null===t){const t=new i.Map(e.current,n);null!=n.center&&null!=n.zoom?t.setView(n.center,n.zoom):null!=n.bounds&&t.fitBounds(n.bounds,n.boundsOptions),null!=n.whenReady&&t.whenReady(n.whenReady),r(t)}}),[e,t,n]),t}(p,f),y=(0,o.useRef)(!1);(0,o.useEffect)((()=>{null!=d&&!1===y.current&&null!=a&&(y.current=!0,a(d))}),[d,a]),(0,o.useEffect)((()=>()=>{null==d||d.remove()}),[d]);const[h]=(0,o.useState)({className:t,id:r,style:l}),v=(0,o.useMemo)((()=>d?{__version:1,map:d}:null),[d]),m=v?o.createElement(u,{value:v},n):c??null;return o.createElement("div",s({},h,{ref:p}),m)}function p(e,n){return null==n?function(n,t){return(0,o.useRef)(e(n,t))}:function(t,r){const c=(0,o.useRef)(e(t,r)),u=(0,o.useRef)(t),{instance:l}=c.current;return(0,o.useEffect)((function(){u.current!==t&&(n(l,t,u.current),u.current=t)}),[l,t,r]),c}}t(3935);function d(e){function n(n,t){const{instance:r,context:c}=e(n).current;return(0,o.useImperativeHandle)(t,(()=>r)),null==n.children?null:o.createElement(u,{value:c},n.children)}return(0,o.forwardRef)(n)}const y=p((function(e,n){let{children:t,...r}=e;const o=new i.Control.Layers(void 0,void 0,r);return{instance:o,context:{...n,layersControl:o}}}),(function(e,n,t){n.collapsed!==t.collapsed&&(!0===n.collapsed?e.collapse():e.expand())}));var h;const v=d((h=y,function(e){const n=l(),t=h(e,n),{instance:r}=t.current,c=(0,o.useRef)(e.position),{position:u}=e;return(0,o.useEffect)((function(){return r.addTo(n.map),function(){r.remove()}}),[n.map,r]),(0,o.useEffect)((function(){null!=u&&u!==c.current&&(r.setPosition(u),c.current=u)}),[r,u]),t}));function m(e){return function(n){const t=l(),r=(0,o.useRef)(n),[c,a]=(0,o.useState)(null),{layersControl:i,map:s}=t,f=(0,o.useCallback)((n=>{null!=i&&(r.current.checked&&s.addLayer(n),e(i,n,r.current.name),a(n))}),[i,s]),p=(0,o.useCallback)((e=>{null==i||i.removeLayer(e),a(null)}),[i]),d=(0,o.useMemo)((()=>({...t,layerContainer:{addLayer:f,removeLayer:p}})),[t,f,p]);return(0,o.useEffect)((()=>{null!==c&&r.current!==n&&(!0!==n.checked||null!=r.current.checked&&!1!==r.current.checked?!0!==r.current.checked||null!=n.checked&&!1!==n.checked||s.removeLayer(c):s.addLayer(c),r.current=n)})),n.children?o.createElement(u,{value:d},n.children):null}}function b(e,n){const t=(0,o.useRef)();(0,o.useEffect)((function(){return null!=n&&e.instance.on(n),t.current=n,function(){null!=t.current&&e.instance.off(t.current),t.current=null}}),[e,n])}function g(e,n){const t=e.pane??n.pane;return t?{...e,pane:t}:e}function R(e,n){(0,o.useEffect)((function(){return(n.layerContainer??n.map).addLayer(e.instance),function(){var t;null==(t=n.layerContainer)||t.removeLayer(e.instance),n.map.removeLayer(e.instance)}}),[n,e])}function w(e){return function(n){const t=l(),r=e(g(n,t),t);return function(e,n){const t=(0,o.useRef)(n);(0,o.useEffect)((function(){n!==t.current&&null!=e.attributionControl&&(null!=t.current&&e.attributionControl.removeAttribution(t.current),null!=n&&e.attributionControl.addAttribution(n)),t.current=n}),[e,n])}(t.map,n.attribution),b(r.current,n.eventHandlers),R(r.current,t),r}}function x(e){return function(n){const t=l(),r=e(g(n,t),t);return b(r.current,n.eventHandlers),R(r.current,t),function(e,n){const t=(0,o.useRef)();(0,o.useEffect)((function(){if(n.pathOptions!==t.current){const r=n.pathOptions??{};e.instance.setStyle(r),t.current=r}}),[e,n])}(r.current,n),r}}function _(e,n){return d(w(p(e,n)))}v.BaseLayer=m((function(e,n,t){e.addBaseLayer(n,t)})),v.Overlay=m((function(e,n,t){e.addOverlay(n,t)}));const C=d(x(p((function(e,n){let{positions:t,...r}=e;const o=new i.Polygon(t,r);return{instance:o,context:{...n,overlayContainer:o}}}),(function(e,n,t){n.positions!==t.positions&&e.setLatLngs(n.positions)}))));const O=_((function(e,n){let{children:t,...r}=e;const o=new i.LayerGroup([],r);return{instance:o,context:{...n,layerContainer:o}}}));const j=function(e,n){return function(e){function n(n,t){const{instance:r}=e(n).current;return(0,o.useImperativeHandle)(t,(()=>r)),null}return(0,o.forwardRef)(n)}(w(p(e,n)))}((function(e,n){let{url:t,...r}=e;return{instance:new i.TileLayer(t,g(r,n)),context:n}}),(function(e,n,t){const{opacity:r,zIndex:o}=n;null!=r&&r!==t.opacity&&e.setOpacity(r),null!=o&&o!==t.zIndex&&e.setZIndex(o)}));const I=_((function(e,n){let{bounds:t,url:r,...o}=e;const c=new i.ImageOverlay(r,t,o);return{instance:c,context:{...n,overlayContainer:c}}}),(function(e,n,t){!function(e,n,t){n.bounds instanceof i.LatLngBounds&&n.bounds!==t.bounds&&e.setBounds(n.bounds),null!=n.opacity&&n.opacity!==t.opacity&&e.setOpacity(n.opacity),null!=n.zIndex&&n.zIndex!==t.zIndex&&e.setZIndex(n.zIndex)}(e,n,t),n.url!==t.url&&e.setUrl(n.url)}));function L(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function z(e,n){return!n||"object"!==A(n)&&"function"!==typeof n?k(e):n}function D(e,n){return D=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},D(e,n)}function N(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return L(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return L(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function B(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=S(e);if(n){var o=S(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return z(this,t)}}var M=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&D(e,n)}(l,e);var n,t,c,u=B(l);function l(e){var n;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,l),P(k(n=u.call(this,e)),"polyRef",o.createRef()),P(k(n),"ndviOverlayRef",o.createRef()),P(k(n),"ndwiOverlayRef",o.createRef()),P(k(n),"layControlRef",o.createRef()),P(k(n),"controllLayer",(function(){var e=n.layControlRef.current._layers.findIndex((function(e){return"NDWI"===e.name})),t=n.layControlRef.current._layers.findIndex((function(e){return"NDVI"===e.name}));return console.log("**Layer Control Ref/NDWI",n.layControlRef.current._layerControlInputs[e].checked),console.log("**Layer Control Ref/NDVI",n.layControlRef.current._layerControlInputs[t].checked),null})),P(k(n),"createPolygon",(function(e){var t=[];e.map((function(e){return t=N(t).concat([[e[1],e[0]]]),null})),console.log("New Array : ",t),n.setState({polygon:t,ndwi_path:"",ndvi_path:""},(function(){}))})),n.state={polygon:[],ndvi_path:"",ndwi_path:"",geo_path:"https://miro.medium.com/max/800/1*Z9QPlG7TvSkYMv0OzUbrPg.jpeg",checkImage:!1},n}return n=l,(t=[{key:"componentWillMount",value:function(){this.createPolygon(this.props.polygon)}},{key:"componentDidUpdate",value:function(e,n){this.state.polygon!==n.polygon&&this.controllLayer(),e.polygon===this.state.polygon&&this.createPolygon(this.props.polygon),e.polygon!==this.props.polygon&&this.createPolygon(this.props.polygon),e.polygon!==this.props.polygon&&(this.createPolygon(this.props.polygon),this.ndwiOverlayRef.current._bounds=this.polyRef.current._bounds,this.ndviOverlayRef.current._bounds=this.polyRef.current._bounds),e.selectedData!==this.props.selectedData&&(this.ndwiOverlayRef.current._bounds=this.polyRef.current._bounds,this.ndviOverlayRef.current._bounds=this.polyRef.current._bounds,this.controllLayer(),this.setState({ndwi_path:this.props.selectedData.ndwi_path,ndvi_path:this.props.selectedData.ndvi_path}))}},{key:"render",value:function(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(v,{ref:this.layControlRef,position:"topright",collapsed:""===this.state.ndwi_path,children:[(0,r.jsx)(C,{ref:this.polyRef,pathOptions:{color:"yellow"},positions:this.state.polygon}),(0,r.jsxs)(O,{children:[(0,r.jsx)(v.BaseLayer,{checked:!0,name:"Satellite Map",children:(0,r.jsx)(j,{url:"https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"})})," ",(0,r.jsx)(v.BaseLayer,{name:"Traffic Map",children:(0,r.jsx)(j,{url:"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png"})})," ",(0,r.jsx)(v.BaseLayer,{name:"Hybrid Map",children:(0,r.jsx)(j,{url:"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png"})})," "]}),(0,r.jsxs)(O,{children:[(0,r.jsxs)(v.Overlay,{checked:this.state.checkImage,name:"NDWI",children:[(0,r.jsx)(I,{ref:this.ndwiOverlayRef,bounds:this.state.polygon,url:"".concat(this.state.ndwi_path)})," "]})," ",(0,r.jsxs)(v.Overlay,{ref:this.layerControlRef,checked:this.state.checkImage,name:"NDVI",children:[(0,r.jsx)(I,{ref:this.ndviOverlayRef,bounds:this.state.polygon,url:"".concat(this.state.ndvi_path)})," "]})," "]})]})})}}])&&E(n.prototype,t),c&&E(n,c),l}(o.Component);var T=function(e){var n=e.polygon,t=e.center,c=e.viewControl,u=(e.newFarmArray,e.selectedData),l=(e.configureColorPalate,(0,o.useState)(!1)),i=(l[0],l[1]),s=function(){return a().setView([t[1],t[0]],17),null};return(0,o.useEffect)((function(){i(c.addView)}),[c.addView]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(f,{center:[t[1],t[0]],zoom:16,children:[(0,r.jsx)(M,{selectedData:u,polygon:n}),(0,r.jsx)(s,{})]})})}}}]);